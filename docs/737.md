# PHP 7.3 çš„æ–°ç‰¹æ€§(ç°åœ¨å¯ä»¥åœ¨ Kinsta è·å¾—)

> åŸæ–‡ï¼š<https://kinsta.com/blog/php-7-3/>

æˆªæ­¢ 2018 å¹´ 12 æœˆ 6 æ—¥ï¼Œæœ€æ–°æœ€æ£’çš„ç‰ˆæœ¬ï¼ŒPHP 7.3 æ¥äº†ï¼éšä¹‹è€Œæ¥çš„æ˜¯æ–°çš„æœ‰ç”¨çš„ç‰¹æ€§ã€åŠŸèƒ½ã€å¼ƒç”¨ã€å¤§é‡çš„é”™è¯¯ä¿®å¤å’Œæ€§èƒ½æå‡ã€‚ **PHP 7.3 ç°åœ¨åœ¨ [MyKinsta ä»ªè¡¨æ¿](https://my.kinsta.com/sites/tools/)ä¸­å¯¹æ‰€æœ‰ Kinsta å®¢æˆ·ç«¯**å¯ç”¨ã€‚ğŸ¤˜

**æ›´æ–°:** [PHP 8.1(æ­£å¼å‘å¸ƒ)](https://kinsta.com/feature-updates/php-8-1/)ç°å·²å¯¹æ‰€æœ‰ Kinsta å®¢æˆ·ç«¯å¼€æ”¾ã€‚Kinsta ä¸å†æ”¯æŒ PHP 7.3ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ”¯æŒ PHP 8.0 å’Œ 8.1 ç‰ˆæœ¬ã€‚

åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†æ¦‚è¿°æˆ‘ä»¬ä¸ªäººè®¤ä¸ºæœ€ç›¸å…³çš„ç‰¹æ€§å’Œå˜åŒ–ã€‚ä½†æ˜¯ä½ å¯ä»¥åœ¨ [PHP 7.3 å‡çº§è¯´æ˜](https://github.com/php/php-src/blob/php-7.3.0beta1/UPGRADING)å’Œ [PHP 7.3 å¾æ±‚æ„è§](https://wiki.php.net/rfc#php_73)ä¸­æŸ¥çœ‹å®Œæ•´çš„ç‰¹æ€§ã€å˜åŒ–å’Œé”™è¯¯ä¿®å¤åˆ—è¡¨ã€‚

[The latest version, PHP 7.3 is now available to all Kinsta clients! ğŸ¤˜Click to Tweet](https://twitter.com/intent/tweet?url=https%3A%2F%2Fkinsta.com%2Fblog%2Fphp-7-3%2F&via=kinsta&text=The+latest+version%2C+PHP+7.3+is+now+available+to+all+Kinsta+clients%21+%F0%9F%A4%98&hashtags=PHP%2Cwebdev)

## PHP 7.3 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Ÿ

åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç» PHP 7.3 çš„ä»¥ä¸‹å˜åŒ–:

*   [å®ç°çµæ´»çš„ Heredoc å’Œ Nowdoc è¯­æ³•](#flexible-heredoc-nowdoc)
*   [åœ¨å‡½æ•°è°ƒç”¨ä¸­å…è®¸å°¾éšé€—å·](#trailing-comma-in-function-calls)
*   [JSON_THROW_ON_ERROR](#JSON_THROW_ON_ERROR)
*   [åˆ—è¡¨()å‚è€ƒèµ‹å€¼](#list)
*   [æ˜¯ _ å¯æ•°å‡½æ•°](#is-countable)
*   [array_key_first()ï¼Œarray_key_last()](#array-key-first-last)
*   [Argon2 å¯†ç å“ˆå¸Œå¢å¼ºåŠŸèƒ½](#argon2)
*   [æŠ˜æ—§](#deprecations)

## çµæ´»çš„ Heredoc å’Œ Nowdoc è¯­æ³•

è¿™å¯èƒ½æ˜¯ PHP 7.3 å¸¦æ¥çš„æœ€ç›¸å…³çš„æ”¹è¿›ä¹‹ä¸€ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒå€¼å¾—æ›´å¤šçš„å…³æ³¨ã€‚å› æ­¤ï¼Œåœ¨æ·±å…¥ PHP 7.3 heredoc/nowdoc çš„å˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬å°†æä¾›ä¸€ä¸ªè¿™ä¸ªæœ‰ç”¨çš„æ ¸å¿ƒç‰¹æ€§çš„å¿«é€Ÿæ¦‚è¿°ã€‚å¦‚æœæ‚¨å·²ç»å¯¹ nowdoc å’Œ heredoc å¾ˆæœ‰ä¿¡å¿ƒï¼Œè¯·æ”¾å¿ƒåœ°è·³åˆ° PHP 7.3 çš„å˜åŒ–ã€‚

*   [heredoc å’Œ nowdoc è¯­æ³•æ¦‚è¿°](#heredoc-nowdoc-overview)
*   PHP 7.3:å…è®¸ç¼©è¿›ç»“æŸæ ‡è®°å¹¶å»é™¤å‰å¯¼ç©ºæ ¼
*   [PHP 7.3:ä»ç»“æŸæ ‡è®°](#heredoc-nowdoc-closing-marker)ä¸­åˆ é™¤å°¾éšçš„æ–°è¡Œè¦æ±‚

### heredoc å’Œ nowdoc è¯­æ³•æ¦‚è¿°

**heredoc è¯­æ³•æä¾›äº†ä¸€ç§æ·»åŠ å¤§é‡æ–‡æœ¬çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦è½¬ä¹‰è¯¸å¦‚åŒå¼•å·**ä¹‹ç±»çš„ä¸œè¥¿ã€‚ä¸€ä¸ª heredoc ä»¥`<<<`å¼€å¤´ï¼Œåé¢è·Ÿç€ä¸€ä¸ªæ ‡è®°ï¼Œä»¥åŒæ ·çš„æ ‡è®°ç»“å°¾ï¼Œåé¢è·Ÿç€ä¸€ä¸ªåˆ†å·ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:

```
print <<<EOT
Heredoc text behaves just like a double-quoted string, without the double quotes.
EOT;
```

nowdoc çš„è¡Œä¸ºå¾ˆåƒ heredocï¼Œä½†æœ‰ä¸€äº›ä¾‹å¤–:

*   æ ‡è¯†ç¬¦ç”¨å•å¼•å·(`<<<'EOT'`)æ‹¬èµ·æ¥
*   åœ¨ nowdoc ä¸­ä¸è¿›è¡Œä»»ä½•è§£æ

ä»¥ä¸‹æ˜¯ nowdoc çš„ä¸€ä¸ªç¤ºä¾‹:

```
print <<<'EOT'
Nowdocs are to single-quoted strings what heredocs are to double-quoted strings.
EOT;
```

Heredocs å’Œ nowdocs ä½¿ç”¨ç›¸åŒçš„è§„åˆ™æ¥ç®¡ç†ç»“æŸæ ‡è®°çš„ä½¿ç”¨:

1.  ç»“æŸæ ‡è®°å¿…é¡»ä»è¯¥è¡Œçš„ç¬¬ä¸€åˆ—å¼€å§‹
2.  æ ‡è®°å¿…é¡»éµå¾ªä¸ PHP ä¸­ä»»ä½•å…¶ä»–æ ‡ç­¾ç›¸åŒçš„å‘½åè§„åˆ™:å®ƒå¿…é¡»åªåŒ…å«å­—æ¯æ•°å­—å­—ç¬¦å’Œä¸‹åˆ’çº¿ï¼Œå¹¶ä¸”å¿…é¡»ä»¥éæ•°å­—å­—ç¬¦æˆ–ä¸‹åˆ’çº¿å¼€å¤´ã€‚

PHP æ‰‹å†Œè­¦å‘Š:

> éå¸¸é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œå¸¦æœ‰ç»“æŸæ ‡è¯†ç¬¦çš„è¡Œä¸èƒ½åŒ…å«å…¶ä»–å­—ç¬¦ï¼Œé™¤äº†åˆ†å·(ï¼›).è¿™å°¤å…¶æ„å‘³ç€æ ‡è¯†ç¬¦*ä¸èƒ½ç¼©è¿›*ï¼Œåˆ†å·å‰åä¸èƒ½æœ‰ä»»ä½•ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ã€‚è®¤è¯†åˆ°ç»“æŸæ ‡è¯†ç¬¦å‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯æœ¬åœ°æ“ä½œç³»ç»Ÿå®šä¹‰çš„æ¢è¡Œç¬¦ä¹Ÿå¾ˆé‡è¦ã€‚è¿™æ˜¯ UNIX ç³»ç»Ÿä¸Šçš„`\n`ï¼ŒåŒ…æ‹¬ macOSã€‚ç»“æŸåˆ†éš”ç¬¦åé¢è¿˜å¿…é¡»è·Ÿä¸€ä¸ªæ¢è¡Œç¬¦ã€‚

**PHP 7.2 æ— æ•ˆè¯­æ³•:**

```
class foo {
    public $bar = <<<EOT
    bar
    EOT;
}
// Identifier must not be indented
```

**PHP 7.2 æœ‰æ•ˆè¯­æ³•:**

```
class foo {
    public $bar = <<<EOT
bar
EOT;
}
```

ç®€è€Œè¨€ä¹‹ï¼Œåœ¨ PHP 7.2 ä¸­:

*   ç»“æŸæ ‡è®°ä¸èƒ½ç¼©è¿›
*   å¸¦æœ‰ç»“æŸæ ‡è®°çš„è¡Œä¸èƒ½åŒ…å«ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ä¹‹ç±»çš„å­—ç¬¦
*   ç»“æŸæ ‡è®°å‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯æ¢è¡Œç¬¦
*   ç»“æŸæ ‡è®°åé¢å¿…é¡»è·Ÿä¸€ä¸ªæ¢è¡Œç¬¦

å¾ˆæ˜æ˜¾ï¼Œheredoc å’Œ nowdoc çš„è¯­æ³•éå¸¸ä¸¥æ ¼ï¼Œä½† PHP 7.3 å¯èƒ½ä¼šé€šè¿‡ä»¥ä¸‹æ”¹è¿›ç¨å¾®æ”¹å˜è¿™ä¸€ç‚¹ã€‚

### 1.å…è®¸ç¼©è¿›ç»“æŸæ ‡è®°å¹¶å»é™¤å‰å¯¼ç©ºæ ¼

åœ¨ PHP 7.3 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼©è¿›ç»“æŸæ ‡è®°ï¼Œæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°ç¼–å†™ä¸‹é¢çš„ä»£ç :

```
class foo {
    public $bar = <<<EOT
        bar
    EOT;
}
```

ç»“æŸæ ‡è®°çš„ç¼©è¿›è®¾ç½®äº†å°†ä»æ­£æ–‡çš„æ¯ä¸€è¡Œä¸­å»é™¤çš„ç©ºç™½(æˆ–åˆ¶è¡¨ç¬¦)çš„æ•°é‡ã€‚ä½†æ˜¯è¦å°å¿ƒ:**ç»“æŸæ ‡è®°ä¸åº”è¯¥ç¼©è¿›è¶…è¿‡æ­£æ–‡**çš„ä»»ä½•å…¶ä»–è¡Œã€‚

å‚è§ä¸‹é¢çš„ä»£ç :

```
class foo {
    public $bar = <<<EOT
    bar
        EOT;
}
```

ä¸Šé¢çš„ä»£ç ä¼šå‘å‡ºä»¥ä¸‹è§£æé”™è¯¯:

```
Parse error: Invalid body indentation level (expecting an indentation at least ...) in %s on line %d
```

å»é™¤åˆ¶è¡¨ç¬¦å’Œç©ºæ ¼å…è®¸æˆ‘ä»¬å°† heredoc/nowdoc çš„ä¸»ä½“ç¼©è¿›åˆ°ä¸å‘¨å›´ä»£ç ç›¸åŒçš„çº§åˆ«ï¼Œå¹¶ä¸”åœ¨ä¸»ä½“çš„æ¯ä¸€è¡Œä¹‹å‰æ²¡æœ‰ä¸å¿…è¦çš„ç©ºæ ¼ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ¶è¡¨ç¬¦å’Œç©ºæ ¼æ¥ç¼©è¿›ï¼Œä½†æ˜¯ä¸å…è®¸æ··åˆä½¿ç”¨ã€‚è¿™æ„å‘³ç€**æˆ‘ä»¬å¿…é¡»å¯¹ç»“æŸæ ‡è®°å’Œæ­£æ–‡**çš„ä»»ä½•è¡Œä½¿ç”¨ç›¸åŒçš„ç¼©è¿›å­—ç¬¦ã€‚å¯¹äºä¸åŒçš„ç¼©è¿›å­—ç¬¦ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸åŒç±»å‹çš„è§£æé”™è¯¯(æ— æ•ˆç¼©è¿›)ã€‚

### 2.ä»ç»“æŸæ ‡è®°ä¸­åˆ é™¤å°¾éšçš„æ–°è¡Œè¦æ±‚

ç›®å‰ï¼Œä¸ºäº†ç»ˆæ­¢ heredoc/nowdocï¼Œæ ‡è®°åé¢å¿…é¡»æœ‰ä¸€ä¸ªæ–°è¡Œã€‚PHP 7.3 å°†æ”¹å˜è¿™ä¸€ç‚¹ï¼Œå…è®¸æˆ‘ä»¬åœ¨åŒä¸€è¡Œç»ˆæ­¢ heredoc/nowdocã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ¥è‡ª RFC çš„ä¾‹å­:

**PHP 7.2 æœ‰æ•ˆè¯­æ³•:**

```
$values = [<<<END
a
b
c
END
, 'd e f'];
```

**PHP 7.3 æœ‰æ•ˆè¯­æ³•:**

```
$values = [<<<END
a
b
c
END, 'd e f'];
```

æ— è®ºå¦‚ä½•ï¼Œåœ¨é€‰æ‹©æ ‡è®°çš„åå­—æ—¶è¦å°å¿ƒï¼Œå› ä¸ºâ€œå¶å°”â€å¦‚æœå®ƒä¸ä½ åœ¨ heredoc/nowdoc æ­£æ–‡ä¸­ä½¿ç”¨çš„ä¸€ä¸ªå•è¯åŒ¹é…ï¼Œä½ å¯èƒ½ä¼šæœŸæœ›ä¸€ä¸ªé”™è¯¯(åœ¨ [RFC](https://wiki.php.net/rfc/flexible_heredoc_nowdoc_syntaxes) å’Œ [GitHub](https://github.com/php/php-src/blob/php-7.3.0beta1/UPGRADING#L33) ä¸Šé˜…è¯»æ›´å¤šå…³äºè¿™ä¸ªçš„å†…å®¹)ã€‚

ä¸¤é¡¹ææ¡ˆéƒ½ä»¥è¶…è¿‡ä¸‰åˆ†ä¹‹äºŒçš„ç¥¨æ•°é€šè¿‡ã€‚

#### PHP 7.3 RFC

*   [çµæ´»çš„ Heredoc å’Œ Nowdoc è¯­æ³•](https://wiki.php.net/rfc/flexible_heredoc_nowdoc_syntaxes)

#### é¢å¤–èµ„æº

*   [Heredoc å­—ç¬¦ä¸²è¯­æ³•](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)
*   [Nowdoc å­—ç¬¦ä¸²è¯­æ³•](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)

## åœ¨å‡½æ•°è°ƒç”¨ä¸­å…è®¸å°¾éšé€—å·

å°¾éšé€—å·(æˆ–â€œç»“å°¾é€—å·â€)æ˜¯é™„åŠ åˆ°å…ƒç´ ã€å‚æ•°æˆ–å±æ€§åˆ—è¡¨çš„é€—å·ï¼Œåœ¨é¢‘ç¹é™„åŠ æ–°å€¼çš„æƒ…å†µä¸‹ï¼Œå®ƒä»¬å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é˜²æ­¢ç”±äºç¼ºå°‘é€—å·è€Œå¯¼è‡´çš„é”™è¯¯ã€‚åœ¨ PHP ä¸­ï¼Œæ•°ç»„ä¸­å…è®¸å°¾éšé€—å·ï¼Œä» [PHP 7.2](https://kinsta.com/blog/php-7-2/) å¼€å§‹ï¼Œåœ¨åˆ†ç»„åç§°ç©ºé—´ä¸­å…è®¸å°¾éšé€—å·ã€‚

ä» PHP 7.3 å¼€å§‹ï¼Œå‡½æ•°å£°æ˜ä¸­å…è®¸ä½¿ç”¨å°¾éšé€—å·ã€‚[å¯å˜å‡½æ•°](https://en.wikipedia.org/wiki/Variadic_function)æä¾›äº†ä¸€ä¸ªå°¾éšé€—å·éå¸¸æœ‰ç”¨çš„ä¸Šä¸‹æ–‡ç¤ºä¾‹:

```
foo(
    $bar,
    $baz,
);
```

å½“æˆ‘ä»¬ç”¨`compact()`åˆ›å»ºä¸€ä¸ªæ•°ç»„æ—¶ï¼Œä¸ºäº†ç”¨`sprintf()`è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…å½“åˆå¹¶ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå°¾éšé€—å·:

```
$newArray = array_merge(
    $arrayOne,
    $arrayTwo,
    ['foo', 'bar'],
);
```

æ­¤å¤–ï¼Œå°¾éšé€—å·å¯¹äºè°ƒè¯•ä¹Ÿå¾ˆæœ‰ç”¨:

```
var_dump(
    $foo,
    $bar,
    $baz,
);
```

è€Œä»–ä»¬å¼ºå¤§çš„æœ‰`unset()`å’Œ`isset()`:

```
unset(
    $foo,
    $bar,
    $baz,
);

isset(
    $foo,
    $bar,
    $baz,
);
```

æ–¹æ³•è°ƒç”¨å’Œå°è£…ä¸­ä¹Ÿå…è®¸ä½¿ç”¨å°¾éšé€—å·ã€‚

æ³¨æ„:**è¿™ä¸ªæ”¹å˜åªä¼šå½±å“å‡½æ•°è°ƒç”¨ã€‚å‡½æ•°å£°æ˜è¯­æ³•ä¸ä¼šæ”¹å˜**ã€‚æ­¤å¤–ï¼Œä¸å…è®¸ä½¿ç”¨ç‹¬ç«‹é€—å·ã€å¤šä¸ªå°¾éšé€—å·å’Œå‰å¯¼é€—å·ã€‚

æ›´å¤šç¤ºä¾‹å¯åœ¨ [RFC é¡µé¢](https://wiki.php.net/rfc/trailing-comma-function-calls)ä¸Šæ‰¾åˆ°ã€‚è¯¥ RFC ä»¥ 30 æ¯” 10 çš„ç¥¨æ•°é€šè¿‡ã€‚

#### PHP 7.3 RFC

*   [çµæ´»çš„ Heredoc å’Œ Nowdoc è¯­æ³•](https://wiki.php.net/rfc/flexible_heredoc_nowdoc_syntaxes)

## JSON _ THROW _ ON _ é”™è¯¯

PHP 7.3 æœ€å—æ¬¢è¿çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯æä¾›äº†ä¸€ç§å¤„ç† JSON é”™è¯¯çš„æ–°æ–¹æ³•ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼Œè€Œæ˜¯å¯¹ JSON æ‰©å±•çš„è¡¥å……ï¼Œå®ƒå°†æ”¹å˜ [json_decode()](http://www.php.net/json_decode) å’Œ [json_encode()](http://www.php.net/json_encode) çš„é”™è¯¯è¡Œä¸ºã€‚

ç›®å‰ï¼Œ`json_decode()`è¿”å›å‡ºé”™çš„`null`ï¼Œä½†æ˜¯`null`ä¹Ÿå¯ä»¥æ˜¯æœ‰æ•ˆçš„ç»“æœã€‚è¿™å¯èƒ½ä¼šä»¤äººå›°æƒ‘ï¼Œå› ä¸º

> åªæœ‰é€šè¿‡è°ƒç”¨`json_last_error()`æˆ–`json_last_error_msg()`æ‰èƒ½çŸ¥é“æ˜¯å¦å‘ç”Ÿäº†é”™è¯¯ï¼Œå®ƒä»¬åˆ†åˆ«ä»¥æœºå™¨å¯è¯»å’Œäººç±»å¯è¯»çš„å½¢å¼è¿”å›å…¨å±€é”™è¯¯çŠ¶æ€ã€‚â€“[PHP RFC](https://wiki.php.net/rfc/json_throw_on_error)

å‡ºé”™æ—¶`json_encode()`è¿”å›`FALSE`ã€‚è¿™ä¸€ç‚¹æ›´æ¸…æ¥šï¼Œå› ä¸ºæœ‰ä¸€ä¸ªç‰¹å®šçš„è¯¯å·®å€¼ã€‚æ€»ä¹‹ï¼Œ**ä¸¤ä¸ªå‡½æ•°éƒ½ä¸ä¼šåœ¨å‡ºé”™æ—¶æš‚åœç¨‹åºæ‰§è¡Œï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºä»»ä½•è­¦å‘Š**ã€‚

è¯è™½å¦‚æ­¤ï¼Œä»¥ä¸‹æ˜¯ PHP 7.3 çš„å»ºè®®:

> ç›¸åï¼ŒRFC å»ºè®®ä¸º`json_decode()`å’Œ`json_encode()`ã€`JSON_THROW_ON_ERROR`å¢åŠ ä¸€ä¸ªæ–°çš„é€‰é¡¹æ ‡å¿—å€¼ã€‚å½“ä¼ é€’è¯¥æ ‡å¿—æ—¶ï¼Œè¿™äº›å‡½æ•°çš„é”™è¯¯è¡Œä¸ºè¢«æ”¹å˜ã€‚å…¨å±€é”™è¯¯çŠ¶æ€ä¿æŒä¸å˜ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œè¿™äº›å‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ª`JsonException`ï¼Œæ¶ˆæ¯å’Œä»£ç åˆ†åˆ«è®¾ç½®ä¸º`json_last_error()`å’Œ`json_last_error_msg()`çš„å€¼ã€‚

ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸€ç§æŠ›å‡º JSON é”™è¯¯çš„ç®€å•æ–¹æ³•:

```
try {
    json_decode("{", false, 512, JSON_THROW_ON_ERROR);
}
catch (\JsonException $exception) {
    echo $exception->getMessage(); // echoes "Syntax error"
}
```

å‡ºé”™æ—¶æŠ›å‡ºå¼‚å¸¸æœ‰å‡ ä¸ªå¥½å¤„ï¼Œä½ ä¼šåœ¨ [RFC](https://wiki.php.net/rfc/json_throw_on_error) ä¸­å‘ç°ã€‚

æ³¨æ„:ä¼ é€’ç»™`json_decode()`çš„æ— æ•ˆæ·±åº¦å‚æ•°è¾“å‡ºè­¦å‘Šå¹¶è¿”å›`NULL`ã€‚è¿™ç§è¡Œä¸ºä¸ä¼šå—åˆ°`JSON_THROW_ON_ERROR`çš„å½±å“ã€‚åŒæ ·ï¼Œå‚æ•°è§£æé”™è¯¯ä¸å—`JSON_THROW_ON_ERROR`å½±å“ï¼Œç»§ç»­äº§ç”Ÿè­¦å‘Šã€‚

è¿™é¡¹ææ¡ˆä»¥ 23 ç¥¨å¯¹ 0 ç¥¨è·å¾—é€šè¿‡ã€‚

#### PHP 7.3 RFC

*   [JSON_THROW_ON_ERROR](https://wiki.php.net/rfc/json_throw_on_error)

#### é¢å¤–èµ„æº

*   [JavaScript å¯¹è±¡ç¬¦å·](http://php.net/manual/en/book.json.php)
*   [json_decode()](http://php.net/manual/en/function.json-decode.php)
*   [json_encode()](http://php.net/manual/en/function.json_encode)
*   [json_last_error()](http://php.net/manual/en/function.json-last-error.php)
*   [json_last_error_msg()](http://php.net/manual/en/function.json-last-error-msg.php)
*   [PHP è¯­è¨€å¼‚å¸¸](http://php.net/manual/en/language.exceptions.php)

## list()å¼•ç”¨èµ‹å€¼

### å¼•ç”¨èµ‹å€¼æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

è€ƒè™‘ä¸‹é¢ä¸€è¡Œ:

```
$b = &$a;
```

è¿™é‡Œ`$b`è·å–`$a`çš„å€¼ï¼Œä½†æ˜¯è¯¥å€¼æ²¡æœ‰ä»`$a`å¤åˆ¶åˆ°`$b`ã€‚åœ¨ PHP ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•ç”¨æ¥èµ‹å€¼ï¼Œè¿™æ„å‘³ç€ä¸¤ä¸ªå˜é‡å¯èƒ½æŒ‡å‘ç›¸åŒçš„æ•°æ®ï¼Œå¯¹ä»»ä½•å˜é‡çš„æ¯æ¬¡æ›´æ”¹éƒ½ä¼šå½±å“åŸå§‹æ•°æ®ã€‚è¿™é‡Œæ˜¯ PHP æ‰‹å†Œä¸­çš„ä¸€ä¸ªä¾‹å­[:](http://php.net/manual/en/language.operators.assignment.php#language.operators.assignment.reference)

```
<?php
$a = 3;
$b = &$a; // $b is a reference to $a

print "$a\n"; // prints 3
print "$b\n"; // prints 3
```

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ›´æ”¹`$a`çš„å€¼:

```
$a = 4; // change $a

print "$a\n"; // prints 4
print "$b\n"; // prints 4 as well, since $b is a reference to $a, which has been changed
```

### ä»€ä¹ˆæ˜¯ list()ç»“æ„ï¼Œå®ƒåœ¨ PHP 7.3 ä¸­æœ‰ä»€ä¹ˆå˜åŒ–

[list()](http://www.php.net/list) è¯­è¨€ç»“æ„å¯ä»¥ç”¨æ¥â€œç»™å˜é‡èµ‹å€¼ï¼Œå°±åƒå®ƒä»¬åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ä¸€æ ·â€ï¼Œä½†æ˜¯å¯¹äº`list()`ï¼Œæˆ‘ä»¬ç›®å‰ä¸å…è®¸é€šè¿‡å¼•ç”¨æ¥ç»™å˜é‡å€¼èµ‹å€¼ã€‚

PHP 7.3 åº”è¯¥ä¼šæ”¹å˜è¿™ä¸€ç‚¹ï¼Œå…è®¸æˆ‘ä»¬ä¹Ÿä½¿ç”¨`list()`æ„é€ é€šè¿‡å¼•ç”¨æ¥åˆ†é…å˜é‡ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤º:

```
$array = [1, 2];
list($a, &$b) = $array;
```

è¿™ä¸ä»¥ä¸‹å†…å®¹ç›¸åŒ:

```
$array = [1, 2];
$a = $array[0];
$b =& $array[1];
```

è¿™ä¸ªæè®®çš„ä¼˜ç‚¹æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡å¼•ç”¨æ¥åˆ†é…å¤šä¸ªå˜é‡ï¼Œè¿™åœ¨å½“å‰æ˜¯ä¸å…è®¸çš„ã€‚æ›´å¤šç¤ºä¾‹è¯·å‚è§ [RFC](https://wiki.php.net/rfc/list_reference_assignment) ã€‚è¿™é¡¹ææ¡ˆä»¥ 17 ç¥¨å¯¹ 7 ç¥¨è·å¾—é€šè¿‡ã€‚

## æ³¨å†Œè®¢é˜…æ—¶äº‹é€šè®¯



### æƒ³çŸ¥é“æˆ‘ä»¬æ˜¯æ€ä¹ˆè®©æµé‡å¢é•¿è¶…è¿‡ 1000%çš„å—ï¼Ÿ

åŠ å…¥ 20ï¼Œ000 å¤šåè·å¾—æˆ‘ä»¬æ¯å‘¨æ—¶äº‹é€šè®¯å’Œå†…éƒ¨æ¶ˆæ¯çš„äººçš„è¡Œåˆ—å§ï¼

[Subscribe Now](#newsletter)

#### PHP 7.3 RFC

*   [åˆ—è¡¨()å‚è€ƒèµ‹å€¼](https://wiki.php.net/rfc/list_reference_assignment)

#### é¢å¤–èµ„æº

*   PHP æ‰‹å†Œ-[list()](http://php.net/manual/en/function.list.php)
*   PHP æ‰‹å†Œ-[å‚è€ƒèµ„æ–™è§£é‡Š](http://php.net/manual/en/language.references.php)
*   èµ‹å€¼è¿ç®—ç¬¦-[å¼•ç”¨èµ‹å€¼](http://php.net/manual/en/language.operators.assignment.php#language.operators.assignment.reference)

## is _ å¯æ•°å‡½æ•°

PHP 7.3 çš„å¦ä¸€ä¸ªæœ‰ç”¨çš„ç‰¹æ€§æ˜¯`is_countable()`å‡½æ•°ã€‚ä¸€ç›´åˆ° [PHP 7.2](https://kinsta.com/blog/php-7-2/) ï¼Œæˆ‘ä»¬åœ¨è¯•å›¾ [count()](http://php.net/manual/en/function.count.php) ä¸å¯æ•°çš„ä¸œè¥¿æ—¶éƒ½ä¼šå‡ºé”™ã€‚ä¸ºæ­¤ï¼Œä¸ºäº†é¿å…å‡ºç°è­¦å‘Šï¼Œæˆ‘ä»¬è¢«è¿«æ·»åŠ ä»¥ä¸‹ä»£ç :

```
if (is_array($foo) || $foo instanceof Countable) {
    // $foo is countable
}
```

è¿™ä¸ª RFC æå‡ºäº†å‡½æ•° [is_countable()](https://wiki.php.net/rfc/is-countable) ï¼Œå¦‚æœç»™å®šå˜é‡æ˜¯æ•°ç»„æˆ–è€…æ˜¯å¯æ•°å˜é‡ï¼Œåˆ™è¿”å›`true`ï¼Œå¦åˆ™è¿”å›`false`ã€‚å› æ­¤ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥ä¿®æ”¹å¦‚ä¸‹:

```
if (is_countable($foo)) {
    // $foo is countable
}
```

è¿™é¡¹ææ¡ˆä»¥ 25 ç¥¨å¯¹ 0 ç¥¨è·å¾—é€šè¿‡ã€‚

#### PHP 7.3 RFC

*   [æ˜¯å¯æ•°çš„](https://wiki.php.net/rfc/is-countable)

#### é¢å¤–èµ„æº

*   [å¯è®¡æ•°ç•Œé¢](http://php.net/manual/en/class.countable.php)
*   [è®¡æ•°](http://php.net/manual/en/function.count.php)

## array_key_first()ï¼Œarray_key_last()

ç›®å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [reset()](http://php.net/manual/en/function.reset.php) ã€ [end()](http://php.net/manual/en/function.end.php) å’Œ [key()](http://php.net/manual/en/function.key.php) å‡½æ•°æ¥è·å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªé”®ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œæ²¡æœ‰åŠæ³•åœ¨ä¸æ”¹å˜æ•°ç»„å†…éƒ¨çŠ¶æ€çš„æƒ…å†µä¸‹æ”¶é›†æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªç´¢å¼•ã€‚å…¶ä»–é€‰é¡¹é€šå¸¸ä¼šé™ä½ä»£ç çš„å¯è¯»æ€§å’Œæ€§èƒ½ã€‚è¯¥ææ¡ˆå°†é€šè¿‡å‘ PHP æ ¸å¿ƒæ·»åŠ ä¸¤ä¸ªæ–°åŠŸèƒ½æ¥æ”¹å˜è¿™ç§æƒ…å†µ:

*   `array_key_first()`
*   `array_key_last()`

ä» PHP 7.3 å¼€å§‹ï¼Œ`array_key_first()`å’Œ`array_key_last()`å…è®¸æ£€ç´¢ç»™å®šæ•°ç»„**çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªé”®ï¼Œè€Œä¸å½±å“å†…éƒ¨æ•°ç»„æŒ‡é’ˆ**ã€‚è¿™äº›æ–°å‡½æ•°å°†å…è®¸æˆ‘ä»¬ç¼–å†™ä¸å¤ªå¤æ‚çš„ä»£ç ï¼Œå¹¶ä¸”åœ¨æŸäº›æƒ…å†µä¸‹é¿å…é”™è¯¯ã€‚æ›´å¤šä¿¡æ¯å’Œå‡ ä¸ªä¾‹å­è§ [RFC](https://wiki.php.net/rfc/array_key_first_last) ã€‚

`array_key_first()`å’Œ`array_key_last()`ä»¥ 18 ç¥¨å¯¹ 14 ç¥¨è·å¾—é€šè¿‡ã€‚

æ³¨æ„:æœ€åˆçš„ RFC æå‡ºäº†å¦å¤–ä¸¤ä¸ªå‡½æ•°ï¼Œ`array_value_first()`å’Œ`array_value_last()`ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°åœ¨ä¸åŒçš„æŠ•ç¥¨ä¸­è¢«æŠ•ç¥¨ï¼Œä½†æ˜¯æ²¡æœ‰è¢«æ‰¹å‡†ï¼Œä¹Ÿä¸ä¼šæˆä¸º PHP æ ¸å¿ƒçš„ä¸€éƒ¨åˆ†ã€‚

#### PHP 7.3 RFC

*   [array_key_first()ï¼Œarray_key_last()](https://wiki.php.net/rfc/array_key_first_last)

#### é¢å¤–èµ„æº

*   [array_key_first](http://php.net/manual/en/function.array-key-first.php)
*   [array_key_last](http://php.net/manual/en/function.array-key-last.php)

## Argon2 å¯†ç å“ˆå¸Œå¢å¼º

Argon2 æ˜¯ä¸€ç§å“ˆå¸Œç®—æ³•[ï¼Œåœ¨ PHP 7.2](https://kinsta.com/blog/php-7-2/) ä¸­å®ç°ï¼Œä½œä¸º Bcrypt ç®—æ³•çš„æ›¿ä»£ã€‚PHP 7.2 å¼•å…¥äº†`PASSWORD_ARGON2I`å¸¸é‡ï¼Œå¯ç”¨äº`password_*`å‡½æ•°:

```
password_hash('password', PASSWORD_ARGON2I);
```

è‡ªä»ç¬¬ä¸€æ¬¡å®ç°ä»¥æ¥ï¼ŒArgon2 åˆå¢åŠ äº†ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œå› æ­¤ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒArgon2 æœ‰ä¸‰ä¸ªç‰ˆæœ¬:

*   **Argon2d** æœ€å¤§åŒ–æŠµæŠ— GPU ç ´è§£æ”»å‡»ã€‚å®ƒé€Ÿåº¦æ›´å¿«ï¼Œå¹¶ä½¿ç”¨ä¾èµ–æ•°æ®çš„å†…å­˜è®¿é—®ã€‚
*   **Argon2i** ä½¿ç”¨ä¸æ•°æ®æ— å…³çš„å†…å­˜è®¿é—®ï¼Œè¿™æ˜¯å¯†ç å“ˆå¸Œçš„é¦–é€‰ã€‚å®ƒçš„é€Ÿåº¦è¾ƒæ…¢ï¼Œå› ä¸ºå®ƒåœ¨å†…å­˜ä¸­ä¼ é€’æ›´å¤šæ¬¡ï¼Œä»¥é˜²æ­¢æŠ˜è¡·æ”»å‡»ã€‚
*   **Argon2id** æ˜¯ä¸€ä¸ªæ··åˆç‰ˆæœ¬ï¼Œå®ƒç»“åˆäº† Argon2i æ–¹æ³•ç”¨äºç¬¬ä¸€æ¬¡å†…å­˜ä¼ é€’ï¼Œä»¥åŠ Argon2d æ–¹æ³•ç”¨äºåç»­ä¼ é€’ã€‚

åœ¨äº’è”ç½‘ä¸Šæ¨è Argon2idï¼Œé™¤éæœ‰å……åˆ†çš„ç†ç”±ç‰¹åˆ«å–œæ¬¢å¦ä¸€ç§å˜ä½“ã€‚

æ–° RFC å»ºè®®åœ¨[å¯†ç  _*](http://php.net/manual/en/ref.password.php) å‡½æ•°ä¸­ä½¿ç”¨æ–°çš„`PASSWORD_ARGON2ID`å¸¸é‡å®ç° Argon2id:

```
password_hash('password', PASSWORD_ARGON2ID);
```

è¯¥å®ç°ä¸ Argon2i å®ç°ç›¸åŒï¼Œå¹¶å°†æ¥å—ç›¸åŒçš„æˆæœ¬å› ç´ :

Struggling with downtime and WordPress problems? Kinsta is the hosting solution designed to save you time! [Check out our features](https://kinsta.com/features/)

*   ä¸€ä¸ª**å†…å­˜å¼€é”€**ï¼Œå®ƒå®šä¹‰äº†å“ˆå¸Œè¿‡ç¨‹ä¸­åº”è¯¥æ¶ˆè€—çš„ KiB æ•°(é»˜è®¤å€¼ä¸º 1<10ï¼Œæˆ– 1024 KiBï¼Œæˆ– 1 MiB)
*   å®šä¹‰å“ˆå¸Œç®—æ³•è¿­ä»£æ¬¡æ•°çš„**æ—¶é—´æˆæœ¬**(é»˜è®¤ä¸º 2)
*   ä¸€ä¸ª**å¹¶è¡Œå› å­**ï¼Œå®ƒè®¾ç½®æ•£åˆ—è¿‡ç¨‹ä¸­å°†ä½¿ç”¨çš„å¹¶è¡Œçº¿ç¨‹çš„æ•°é‡(é»˜è®¤ä¸º 2)

è¯·å‚è§ä»¥ä¸‹ä»£ç :

```
$options = ['memory_cost' => 1<<11, 'time_cost' => 4, 'threads' => 2];
password_hash('password', PASSWORD_ARGON2ID, $options);
```

å…³äº [RFC](https://wiki.php.net/rfc/argon2_password_hash_enhancements) çš„æ›´å¤šä¿¡æ¯å’Œç¤ºä¾‹ã€‚

#### PHP 7.3 RFC

*   [Argon2 å¯†ç å“ˆå¸Œå¢å¼ºåŠŸèƒ½](https://wiki.php.net/rfc/argon2_password_hash_enhancements)

#### é¢å¤–èµ„æº

*   [Argon2](https://en.wikipedia.org/wiki/Argon2) (ç»´åŸºç™¾ç§‘)
*   Argon2:ç”¨äºå¯†ç æ•£åˆ—å’Œå…¶ä»–åº”ç”¨çš„ç¡¬å­˜å‚¨åŠŸèƒ½

## è´¬å€¼

ä»¥ä¸‹å‡½æ•°/åŠŸèƒ½åœ¨ PHP 7.3 ä¸­å°†è¢«å¼ƒç”¨ï¼Œåœ¨ PHP 8.0 ä¹‹å‰å°†è¢«åˆ é™¤ã€‚

### å¼ƒç”¨å¹¶åˆ é™¤ image2wbmp()

å‡½æ•°çš„ä½œç”¨æ˜¯:è¾“å‡ºæˆ–ä¿å­˜ç»™å®šå›¾åƒçš„ wbmp ç‰ˆæœ¬ã€‚è¿™ä¸ªå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°:å›¾åƒèµ„æºã€æ–‡ä»¶å(ä¿å­˜æ–‡ä»¶çš„è·¯å¾„)å’Œå‰æ™¯è‰²ã€‚
ä» PHP 5.0 å¼€å§‹ï¼Œä¸ [imagewbmp()](http://php.net/manual/en/function.imagewbmp.php) ç›¸åŒï¼Œæ‰€ä»¥è¿™ä¸ª [RFC](https://wiki.php.net/rfc/image2wbmp) æå‡ºå¼ƒç”¨å¹¶ç§»é™¤ã€‚
ä» PHP 7.3 å¼€å§‹ï¼Œæ¯æ¬¡è°ƒç”¨`image2wbmp()`éƒ½ä¼šå‘å‡ºä¸€ä¸ªå¼ƒç”¨è­¦å‘Šã€‚ç§»é™¤ä¹‹åï¼Œæ¯ä¸ªè°ƒç”¨éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªè‡´å‘½é”™è¯¯ã€‚

#### PHP 7.3 RFC

*   [å¼ƒç”¨å¹¶åˆ é™¤ image2 BMP()](https://wiki.php.net/rfc/image2wbmp)

### å¼ƒç”¨å¹¶ç§»é™¤ä¸åŒºåˆ†å¤§å°å†™çš„å¸¸æ•°

PHP ç›®å‰æ”¯æŒåŒºåˆ†å¤§å°å†™å’Œä¸åŒºåˆ†å¤§å°å†™çš„å¸¸é‡ã€‚æ€»ä¹‹ï¼Œ**ä¸åŒºåˆ†å¤§å°å†™çš„**å¸¸é‡æ˜¯å—æ”¯æŒçš„ï¼Œä½†è¢«è®¤ä¸ºåœ¨åŠŸèƒ½ä¸Šå­˜åœ¨ä¸ä¸€è‡´æ€§ï¼Œå¹¶ä¸”ä½¿ç”¨èµ·æ¥å¾ˆå¤æ‚ã€‚
è¿™ä¸€æè®®å§‹äºä»¥ä¸‹å‰æ:

*   [ç±»å¸¸é‡](http://php.net/manual/en/language.oop5.constants.php)æ€»æ˜¯åŒºåˆ†å¤§å°å†™
*   ç”¨`const`å£°æ˜çš„å…¨å±€å¸¸é‡æ€»æ˜¯åŒºåˆ†å¤§å°å†™çš„
*   é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨`define()`å®šä¹‰çš„å¸¸é‡åŒºåˆ†å¤§å°å†™

æ­¤å¤–ï¼Œ [PHP è¯­è¨€å¼•ç”¨](http://php.net/manual/en/language.constants.php)æ˜ç¡®å£°æ˜:

> é»˜è®¤æƒ…å†µä¸‹ï¼Œå¸¸æ•°åŒºåˆ†å¤§å°å†™ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œå¸¸é‡æ ‡è¯†ç¬¦æ€»æ˜¯å¤§å†™çš„ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬ RFC æå‡ºäº†ä»¥ä¸‹æ›´æ”¹:

*   ä¸èµæˆè°ƒç”¨ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸º`true`çš„`define()`â€“PHP 7.3
*   ä¸èµæˆä½¿ç”¨ä¸å£°æ˜ä¸åŒçš„å¤§å°å†™è®¿é—®ä¸åŒºåˆ†å¤§å°å†™çš„å¸¸é‡(é™¤äº†`true`ã€`false`å’Œ`null`)â€“PHP 7.3
*   å»é™¤å£°æ˜ä¸åŒºåˆ†å¤§å°å†™çš„å¸¸é‡çš„å¯èƒ½æ€§â€”â€”PHP 8.0
*   å°†`true`ã€`false`å’Œ`null`ä»ç‰¹æ®Šæƒ…å†µä¸‹çš„å¸¸é‡è½¬æ¢ä¸ºä¿ç•™å…³é”®å­—â€“PHP 8.0

#### PHP 7.3 RFC

[å¼ƒç”¨å¹¶åˆ é™¤ä¸åŒºåˆ†å¤§å°å†™çš„å¸¸é‡](https://wiki.php.net/rfc/case_insensitive_constant_deprecation)ã€‚

### php 7.3 çš„é™„åŠ åä½œç”¨

è¿™é‡Œæ˜¯ PHP 7.3 ä¸­è¢«å¦å†³çš„åŠŸèƒ½çš„å¿«é€Ÿåˆ—è¡¨ã€‚è¿™ä¸æ˜¯è¯¦å°½çš„ï¼Œå®ƒä»¬åªæ˜¯æˆ‘ä¸ªäººè®¤ä¸ºæ›´ç›¸å…³çš„åå¯¹å»ºè®®ã€‚å…³äºå»ºè®®çš„åå¯¹æ„è§çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚è§ PHP 7.3 çš„åå¯¹æ„è§ã€‚

**æœªè®°å½•çš„ mbstring å‡½æ•°åˆ«å**:æœ‰è®¸å¤šæœªè®°å½•çš„ [mbstring](http://php.net/manual/en/book.mbstring.php) å‡½æ•°åˆ«åæ˜¯ä½¿ç”¨`mb_`å‰ç¼€çš„ç­‰ä»·å‡½æ•°çš„é‡å¤ã€‚ä¾‹å¦‚ï¼Œ`mbereg`æ˜¯`mb_ereg`çš„åˆ«åã€‚æ‰€æœ‰è¿™äº›å‡½æ•°éƒ½å°†è¢«æ ‡è®°ä¸ºä¸æ¨èä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­é‡åˆ°å®ƒä»¬æ—¶ä¼šæŠ›å‡ºä¸€ä¸ªä¸æ¨èä½¿ç”¨çš„é€šçŸ¥ã€‚

**æ•´æ•°é’ˆä¸²æœç´¢åŠŸèƒ½**:è¿™äº›åŠŸèƒ½é€šå¸¸ä½œç”¨äºä¸²é’ˆã€‚å¦‚æœç»™å®šä¸€ä¸ªéå­—ç¬¦ä¸²é’ˆï¼Œå®ƒè¢«è½¬æ¢æˆä¸€ä¸ªæ•´æ•°å¹¶ä½œä¸ºä¸€ä¸ªå­—ç¬¦çš„åºæ•°å€¼åº”ç”¨(åœ¨ [PHP æ‰‹å†Œ](http://php.net/manual/en/function.strpos.php)ä¸Šé˜…è¯»æ›´å¤š)ã€‚è¿™é‡Œæ˜¯æ¥è‡ª RFC çš„ä¸€ä¸ªä¾‹å­[:](https://wiki.php.net/rfc/deprecations_php_7_3#string_search_functions_with_integer_needle)

```
$str = "There are 10 apples";
var_dump(strpos($str, "10")); // int(10)
var_dump(strpos($str, 10));   // bool(false)
```

è¿™è¢«è®¤ä¸ºæ˜¯ä»¤äººå›°æƒ‘çš„ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´ä¸å¯é¢„çŸ¥çš„é—®é¢˜ï¼Œå› ä¸ºç±»å‹ä¼šéšç€ç”¨æˆ·æ•°æ®æºè€Œæ”¹å˜ã€‚ä¸ºæ­¤ï¼ŒRFC å»ºè®®ï¼Œå¦‚æœå°†éå­—ç¬¦ä¸²é’ˆä¼ é€’ç»™ä»¥ä¸‹å‡½æ•°ä¹‹ä¸€ï¼Œåˆ™å‘å‡ºå¼ƒç”¨è­¦å‘Š:

*   `strpos`
*   `strrpos`
*   `stripos`
*   `strripos`
*   `strstr`
*   `strchr`
*   `strrchr`
*   `stristr`

åœ¨ PHP 8.0 ä¸­ï¼Œå¼ƒç”¨è­¦å‘Šåº”è¯¥è¢«ç§»é™¤ï¼Œé’ˆåº”è¯¥è¢«è‡ªåŠ¨è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚



> é‡‘æ–¯å¡”æŠŠæˆ‘å® åäº†ï¼Œæˆ‘ç°åœ¨è¦æ±‚æ¯ä¸ªä¾›åº”å•†éƒ½æä¾›é‚£æ ·çš„æœåŠ¡æ°´å¹³ã€‚æˆ‘ä»¬è¿˜è¯•å›¾é€šè¿‡æˆ‘ä»¬çš„ SaaS å·¥å…·æ”¯æŒè¾¾åˆ°è¿™ä¸€æ°´å¹³ã€‚
> 
> <footer class="wp-block-kinsta-client-quote__footer">
> 
> ![](img/60f15faa5735bd2437bf9dada5ee9192.png)
> 
> <cite class="wp-block-kinsta-client-quote__cite">Suganthan Mohanadasanfrom@ suganthamn</cite></footer>

[æŸ¥çœ‹è®¡åˆ’](https://kinsta.com/plans/)

**`fgetss()`å‡½æ•°å’Œ`string.strip_tags`æµè¿‡æ»¤å™¨** : `fgetss()`å’Œ`string.strip_tags`åœ¨è¯»å–æµæ—¶ä»æµä¸­å‰¥ç¦»æ ‡ç­¾ã€‚å‡½æ•°å’Œè¿‡æ»¤å™¨éƒ½å…¬å¼€äº† [strip_tags()](http://php.net/manual/en/function.strip-tags.php) åŠŸèƒ½ï¼Œä½¿å¾—`strip_tags()`çš„å®ç°æ›´åŠ å¤æ‚ï¼Œå› ä¸ºéœ€è¦ä¸€ä¸ªæµçŠ¶æ€æœºã€‚æ­¤å¤–ï¼ŒRFC æŒ‡å‡ºäº†è¿™äº›åŠŸèƒ½çš„å¦ä¸€ä¸ªç¼ºç‚¹:

> å¦ä¸€æ–¹é¢ï¼Œè¿™äº›åŠŸèƒ½ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ã€‚æœ¬èº«ç”±äºè‡ªèº«çš„å±€é™æ€§å’Œå·²çŸ¥çš„ bugï¼Œå·²ç»å¾ˆå°‘æœ‰åˆæ³•çš„åº”ç”¨äº†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸éœ€è¦ä¸ºæµåº”ç”¨ç¨‹åºæä¾›æœ¬åœ°æ”¯æŒã€‚

å› æ­¤ RFC å»ºè®®å°†`fgetss()`ã€`gzgetss()`å’Œ`SplFileObject::fgetss()`æ ‡è®°ä¸ºä¸æ¨èä½¿ç”¨ã€‚

## PHP 7.3 å¯¹ WordPress ç”¨æˆ·æ„å‘³ç€ä»€ä¹ˆï¼Ÿ

æ®å®˜æ–¹ [WordPress ç»Ÿè®¡é¡µé¢](https://wordpress.org/about/stats/)æ˜¾ç¤ºï¼Œæˆªè‡³æœ¬æ–‡æ’°å†™ä¹‹æ—¶ï¼Œåªæœ‰ 32.9%çš„ WordPress ç”¨æˆ·å‡çº§åˆ°äº† PHP 7 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚åªæœ‰ 4%çš„äººåœ¨ä½¿ç”¨ T2 çš„ PHP 7.2ã€‚æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œè¶…è¿‡ 38%çš„å¤§å¤šæ•°ç”¨æˆ·ä»åœ¨è¿è¡Œ PHP 5.6ã€‚æ›´å¯æ€•çš„æ˜¯ï¼Œè¶…è¿‡ 28.5%çš„ç”¨æˆ·åœ¨ä½¿ç”¨ä¸æ”¯æŒçš„ PHP ç‰ˆæœ¬ã€‚æˆªè‡³ 2016 å¹´ 12 æœˆï¼ŒWordPress.org å®é™…ä¸Šå°†ä»–ä»¬çš„[å®˜æ–¹æ¨è](https://wordpress.org/about/requirements/)ä» PHP 5.6 å‡çº§åˆ° PHP 7 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

![WordPress PHP versions](img/b557a2cecefbcac41a6f1186c3340fff.png)

WordPress PHP versions



### PHP 7 æ€§èƒ½

ä»æ€§èƒ½çš„è§’åº¦æ¥çœ‹ï¼Œä¸Šé¢çš„æ•°å­—å°¤å…¶ä»¤äººæ²®ä¸§ï¼Œå› ä¸º PHP 7 å·²ç»æ˜¾ç¤ºå‡ºæ˜æ˜¾æ›´å¿«ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç»Ÿè®¡æ•°æ®:

*   å®˜æ–¹ PHP åŸºå‡†æµ‹è¯•è¡¨æ˜ï¼Œä¸ PHP 5.6 ç›¸æ¯”ï¼ŒPHP 7 å…è®¸ç³»ç»Ÿæ¯ç§’æ‰§è¡Œä¸¤å€çš„è¯·æ±‚ï¼Œè€Œå»¶è¿Ÿå‡ ä¹æ˜¯ 5.6 çš„ä¸€åŠã€‚
*   Christian Vigh ä¹Ÿå‘è¡¨äº†ä¸€ç¯‡ [PHP æ€§èƒ½å¯¹æ¯”](https://www.phpclasses.org/blog/post/493-php-performance-evolution.html)æ–‡ç« ï¼Œä»–å‘ç° PHP 5.2 æ¯” PHP 7 æ…¢ 400%ã€‚

æˆ‘ä»¬è¿è¡Œäº†è‡ªå·±çš„ [PHP æ€§èƒ½åŸºå‡†](https://kinsta.com/blog/php-benchmarks/)ã€‚ä¸ä¸Šé¢çš„åŸºå‡†ç±»ä¼¼ï¼Œæˆ‘ä»¬çœ‹åˆ° PHP 7.3 ä¸Šçš„ WordPress 5.0 æ¯ç§’å¯ä»¥æ‰§è¡Œçš„äº‹åŠ¡(è¯·æ±‚)å‡ ä¹æ˜¯ PHP 5.6 çš„ä¸‰å€ã€‚

![WordPress 5.0 PHP benchmarks](img/aa3e50c1190462560cd448720e536908.png)

WordPress 5.0 PHP benchmarks



*   WordPress 5.0 PHP 5.6 åŸºå‡†æµ‹è¯•:91.64 è¯·æ±‚/ç§’
*   WordPress 5.0 PHP 7.0 åŸºå‡†æµ‹è¯•ç»“æœ:206.71 è¯·æ±‚/ç§’
*   WordPress 5.0 PHP 7.1 åŸºå‡†æµ‹è¯•ç»“æœ:210.98 è¯·æ±‚/ç§’
*   WordPress 5.0 PHP 7.2 åŸºå‡†æµ‹è¯•ç»“æœ:229.18 req/sec
*   WordPress 5.0 **PHP 7.3 åŸºå‡†æµ‹è¯•ç»“æœ:253.20 req/sec** **ğŸ†**

æœ‰è¶£çš„æ˜¯ï¼ŒPHP 7.3 ä¸Šçš„ WordPress 4.9.8 æ¯” WordPress 5.0 ç¨å¿«ã€‚

![WordPress 4.9.8 PHP benchmarks](img/b868199097e8e5ac8cc30cbf338604d5.png)

WordPress 4.9.8 PHP benchmarks



*   WordPress 4.9.8 PHP 5.6 åŸºå‡†æµ‹è¯•:97.59 è¯·æ±‚/ç§’
*   WordPress 4.9.8 PHP 7.0 åŸºå‡†æµ‹è¯•ç»“æœ:221.42 è¯·æ±‚/ç§’
*   WordPress 4.9.8 PHP 7.1 åŸºå‡†æµ‹è¯•ç»“æœ:233.78 è¯·æ±‚/ç§’
*   WordPress 4.9.8 PHP 7.2 åŸºå‡†æµ‹è¯•ç»“æœ:250.36 req/sec
*   PHP 7.3 åŸºå‡†æµ‹è¯•ç»“æœ:276.31 è¯·æ±‚/ç§’ğŸ†

è®¸å¤šæ›´æ–°ç¼“æ…¢ï¼Œä»…ä»…æ˜¯å› ä¸ºæµ‹è¯•æ‰€æœ‰æ–°çš„ç¬¬ä¸‰æ–¹æ’ä»¶å’Œä¸»é¢˜ä»¥ç¡®ä¿å®ƒä»¬æ­£å¸¸è¿è¡Œéœ€è¦æ—¶é—´ã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œå½’ç»“èµ·æ¥å°±æ˜¯ä»–ä»¬è¿˜æ²¡æœ‰åšã€‚

### æ£€æŸ¥ä½ çš„ PHP ç‰ˆæœ¬

ä¸ç¡®å®šä½ è¿è¡Œçš„æ˜¯ä»€ä¹ˆç‰ˆæœ¬çš„ PHPï¼Ÿæœ€ç®€å•çš„æ£€æŸ¥æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨ç±»ä¼¼äº [Pingdom](https://kinsta.com/blog/pingdom-speed-test/) æˆ– Google Chrome Devtools çš„å·¥å…·ã€‚ç¬¬ä¸€ä¸ª HTTP è¯·æ±‚å¤´é€šå¸¸ä¼šæ˜¾ç¤ºç‰ˆæœ¬ã€‚

![Check version of PHP](img/598f5e24ab948288a0db3eac37c10e08.png)

Check version of PHP



è¿™ä¾èµ–äºä¸»æœºä¸ä¿®æ”¹`X-Powered-By`å¤´å€¼ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæ‚¨å¯èƒ½çœ‹ä¸åˆ°æ‚¨çš„ PHP ç‰ˆæœ¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥å®‰è£…ä¸€ä¸ªåƒ[ç‰ˆæœ¬ä¿¡æ¯](https://wordpress.org/plugins/version-info/)è¿™æ ·çš„å…è´¹æ’ä»¶ï¼Œå®ƒä¼šåœ¨ä½ çš„ WordPress ç®¡ç†é¢æ¿çš„é¡µè„šæ˜¾ç¤ºä¸€äº›åŸºæœ¬çš„æœåŠ¡å™¨ä¿¡æ¯ã€‚

![Check PHP version in WordPress](img/edb12f2206bb2891fccd649817b21291.png)

Check PHP version in WordPress



æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥[é€šè¿‡ FTP](https://kinsta.com/blog/php-versions/) ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶æ¥æŸ¥çœ‹ä½ çš„ PHP ç‰ˆæœ¬ï¼Œæˆ–è€…è”ç³»ä½ çš„ä¸»æœºè¯¢é—®ã€‚

### æ›´æ–°åˆ° PHP 7.3

PHP 7.3 çš„æœ€ç»ˆç‰ˆæœ¬åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥é©¬ä¸Šå¼€å§‹æµ‹è¯•ã€‚ä½ å¯ä»¥[åœ¨æœ¬åœ°](https://kinsta.com/blog/install-wordpress-locally/)æµ‹è¯•ä½ çš„ WordPress ç«™ç‚¹ï¼Œæˆ–è€…åœ¨åƒ [Docker](https://docs.docker.com/get-started/) è¿™æ ·çš„ç¯å¢ƒä¸­æ£€æŸ¥ä½ çš„è„šæœ¬ï¼Œå®ƒå…è®¸ä½ ä»å‘½ä»¤è¡Œæµ‹è¯•ä¸åŒç‰ˆæœ¬çš„ PHPã€‚

æˆ–è€…ï¼Œæ‚¨å¯ä»¥åˆ©ç”¨ä¸€ä¸ªä¸´æ—¶ç¯å¢ƒï¼Œå› ä¸ºè¿™å°†æ›´ç±»ä¼¼äºä¸€ä¸ªå®é™…çš„ç”Ÿäº§ç«™ç‚¹ã€‚åœ¨ MyKinsta ä»ªè¡¨æ¿ä¸­ç‚¹å‡»å‡ ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª[æš‚å­˜ç¯å¢ƒ](https://kinsta.com/help/staging-environment/)ã€‚

![WordPress staging environment](img/9a4582becbf142c24b3ad631844e2675.png)

WordPress staging environment



æˆ‘ä»¬æ€»æ˜¯å»ºè®®åœ¨ç”Ÿäº§ç°åœºä½¿ç”¨å®ƒä¹‹å‰è¿›è¡Œå½»åº•çš„æµ‹è¯•ã€‚ä¸ºæ­¤ï¼Œåªéœ€åœ¨â€œå·¥å…·â€ä¸‹æ›´æ”¹ç™»å°ç«™ç‚¹çš„ PHP å¼•æ“ï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹æµ‹è¯•ä»¥ç¡®ä¿æ‚¨çš„ç¬¬ä¸‰æ–¹æ’ä»¶å’Œä¸»é¢˜çš„å…¼å®¹æ€§ã€‚

![Change to PHP 7.3](img/879fd79af50f2e61166f9c44272b5c79.png)

Change to PHP 7.3



ä¸€æ—¦ä½ ç¡®è®¤ä¸€åˆ‡æ­£å¸¸ï¼Œä½ å¯ä»¥å°†ä½ çš„ç”Ÿäº§ç«™ç‚¹å‡çº§åˆ° PHP 7.3ï¼Œæˆ–è€…å¦‚æœä½ åšäº†ä»»ä½•æ”¹å˜ï¼Œä¹Ÿå¯ä»¥[å°†ä½ çš„ä¸´æ—¶ç«™ç‚¹å‡çº§åˆ°æ´»åŠ¨çŠ¶æ€](https://kinsta.com/help/push-staging-live/)ã€‚

## æ‘˜è¦

PHP æœ€æ–°æœ€æ£’çš„ç‰ˆæœ¬åœ¨è¿™é‡Œã€‚å®ƒç»™æˆ‘ä»¬å¸¦æ¥äº†è¯¸å¦‚çµæ´»çš„ heredocs å’Œ nowdocsã€å‡½æ•°è°ƒç”¨ä¸­çš„å°¾éšé€—å·ã€`list()`å¼•ç”¨èµ‹å€¼ç­‰ç¤¼ç‰©ã€‚åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†æˆ‘ä»¬æœ€å–œæ¬¢çš„æ”¹è¿›å’Œå˜åŒ–çš„æ¦‚è¿°ï¼Œä½†æˆ‘ä»¬ä¹Ÿæƒ³çŸ¥é“å“ªäº›æ˜¯ä½ æœ€å–œæ¬¢çš„ï¼Œä»¥åŠä½ å°†ä»¥ä½•ç§æ–¹å¼åˆ©ç”¨å®ƒä»¬ã€‚è¯·åœ¨ä¸‹é¢çš„è¯„è®ºä¸­å‘Šè¯‰æˆ‘ä»¬ã€‚è€Œä¸”åˆ«å¿˜äº† [PHP å¹¶æ²¡æœ‰æ­»](https://kinsta.com/blog/is-php-dead/)ï¼

[#PHP 7.3 is all about developers. Check out the new features, functionality, and performance boost! ğŸ¤˜Click to Tweet](https://twitter.com/intent/tweet?url=https%3A%2F%2Fkinsta.com%2Fblog%2Fphp-7-3%2F&via=kinsta&text=%23PHP+7.3+is+all+about+developers.+Check+out+the+new+features%2C+functionality%2C+and+performance+boost%21+%F0%9F%A4%98)

ä½ å¯ä»¥åœ¨[å¾æ±‚æ„è§](https://wiki.php.net/rfc#php_73)é¡µé¢å’Œ GitHub çš„ [PHP 7.3 å‡çº§è¯´æ˜](https://github.com/php/php-src/blob/php-7.3.0beta1/UPGRADING)ä¸­æ‰¾åˆ° PHP 7.3 ææ¡ˆçš„å®Œæ•´åˆ—è¡¨ã€‚

* * *

è®©ä½ æ‰€æœ‰çš„[åº”ç”¨ç¨‹åº](https://kinsta.com/application-hosting/)ã€[æ•°æ®åº“](https://kinsta.com/database-hosting/)å’Œ [WordPress ç½‘ç«™](https://kinsta.com/wordpress-hosting/)åœ¨çº¿å¹¶åœ¨ä¸€ä¸ªå±‹æªä¸‹ã€‚æˆ‘ä»¬åŠŸèƒ½ä¸°å¯Œçš„é«˜æ€§èƒ½äº‘å¹³å°åŒ…æ‹¬:

*   åœ¨ MyKinsta ä»ªè¡¨ç›˜ä¸­è½»æ¾è®¾ç½®å’Œç®¡ç†
*   24/7 ä¸“å®¶æ”¯æŒ
*   æœ€å¥½çš„è°·æ­Œäº‘å¹³å°ç¡¬ä»¶å’Œç½‘ç»œï¼Œç”± Kubernetes æä¾›æœ€å¤§çš„å¯æ‰©å±•æ€§
*   é¢å‘é€Ÿåº¦å’Œå®‰å…¨æ€§çš„ä¼ä¸šçº§ Cloudflare é›†æˆ
*   å…¨çƒå—ä¼—è¦†ç›–å…¨çƒå¤šè¾¾ 35 ä¸ªæ•°æ®ä¸­å¿ƒå’Œ 275 å¤šä¸ª pop

åœ¨ç¬¬ä¸€ä¸ªæœˆä½¿ç”¨æ‰˜ç®¡çš„[åº”ç”¨ç¨‹åºæˆ–æ‰˜ç®¡](https://kinsta.com/application-hosting/)çš„[æ•°æ®åº“ï¼Œæ‚¨å¯ä»¥äº«å— 20 ç¾å…ƒçš„ä¼˜æƒ ï¼Œäº²è‡ªæµ‹è¯•ä¸€ä¸‹ã€‚æ¢ç´¢æˆ‘ä»¬çš„](https://kinsta.com/database-hosting/)[è®¡åˆ’](https://kinsta.com/plans/)æˆ–[ä¸é”€å”®äººå‘˜äº¤è°ˆ](https://kinsta.com/contact-us/)ä»¥æ‰¾åˆ°æœ€é€‚åˆæ‚¨çš„æ–¹å¼ã€‚
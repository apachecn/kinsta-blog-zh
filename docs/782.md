# å¦‚ä½•åœ¨ Kinsta ä½¿ç”¨åŸºå²©å’Œ Trellis(WordPress å¼€å‘)

> åŸæ–‡ï¼š<https://kinsta.com/blog/bedrock-trellis/>

è¿™æ˜¯ç»™æ‰€æœ‰ WordPress å¼€å‘è€…çš„å¸–å­ï¼

ä»Šå¤©æˆ‘ä»¬å°†è§£é‡Šå¦‚ä½•åœ¨ Kinsta ä½¿ç”¨å’Œæ•´åˆ[åŸºå²©](https://roots.io/bedrock/)å’Œ[æ£šæ¶](https://roots.io/trellis/)ã€‚

å¦‚æœæ‚¨ä»¥å‰æ²¡æœ‰å¬è¯´è¿‡è¿™ä¸¤ä¸ªå·¥å…·ï¼Œæˆ‘ä»¬ä¹Ÿå°†ä»‹ç»å®ƒä»¬ï¼Œå¹¶å¸Œæœ›æœ‰åŠ©äºè§£é‡Šä¸ºä»€ä¹ˆæ‚¨å¸Œæœ›åœ¨ä¼ ç»Ÿè®¾ç½®ä¸­ä½¿ç”¨å®ƒä»¬ã€‚

## åŸºå²©å’Œæ ¼å­æ¶

belt å’Œ Trellis çš„å­˜åœ¨æ˜¯ä¸ºäº†**è®©å¼€å‘ã€ç»´æŠ¤å’Œéƒ¨ç½²** WordPress ç«™ç‚¹å˜å¾—æ›´å®¹æ˜“ã€‚

*   åŸºå²©æä¾›äº†ä¸€ç§ç®¡ç†ä½ çš„ WordPress å®‰è£…çš„æ›¿ä»£æ–¹æ³•ï¼Œå®ƒæœ‰ä¸€ä¸ªæ”¹è¿›çš„æ–‡ä»¶å¤¹ç»“æ„ï¼Œç°ä»£çš„å¼€å‘å·¥å…·å’Œæ”¹è¿›çš„å®‰å…¨æ€§ã€‚
*   Trellis ä¸åŸºå²©ä¸€èµ·å·¥ä½œï¼Œåˆ›å»ºå¸¦æœ‰ä¸€ä¸ªå‘½ä»¤éƒ¨ç½²çš„å¼€å‘ç¯å¢ƒã€‚

ä½¿ç”¨åŸºå²©çš„ä¸»è¦åŸå› æ˜¯ä¸º WordPress é¡¹ç›®è·å¾—é€‚å½“çš„ä¾èµ–å’ŒåŒ…ç®¡ç†ã€‚ä½ å¯èƒ½å·²ç»ç†Ÿæ‚‰ JavaScript çš„ [npm](https://www.npmjs.com/) æˆ–è€… Ruby çš„ [Bundler](http://bundler.io/) ã€‚PHP ä¹Ÿä¸ä¾‹å¤–ï¼Œå®ƒçš„å¯¹ç­‰ç‰©æ˜¯[ä½œæ›²å®¶](https://getcomposer.org/)ã€‚

è™½ç„¶ä½¿ç”¨åŒ…ç®¡ç†å™¨å¾ˆå¸¸è§ï¼Œä½†å¯¹ WordPress æœ¬èº«æ¥è¯´å´ä¸å¤ªå¸¸è§ï¼Œå› ä¸º WordPress å·²ç»æœ‰äº†è‡ªå·±çš„æ’ä»¶æ¦‚å¿µã€‚åŸºå²©é›†æˆäº† Composer æ¥ç®¡ç†æ’ä»¶ï¼Œä¸»é¢˜ï¼Œç”šè‡³ WordPress æ ¸å¿ƒæœ¬èº«ä½œä¸ºä¾èµ–é¡¹ã€‚









Trellis æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥è½»æ¾åœ°åˆ›å»ºå¼€å‘å’Œç”Ÿäº§æœåŠ¡å™¨æ¥æ‰˜ç®¡ WordPress ç«™ç‚¹ã€‚å®ƒä¹Ÿæ˜¯ä¸“é—¨ä¸ºåŸºäºåŸºå²©çš„ç½‘ç«™è€Œåˆ›å»ºçš„ã€‚Trellis çš„é»˜è®¤ç”¨ä¾‹æ˜¯ä½¿ç”¨å®ƒä¸ç”Ÿäº§ä¸­çš„[æµæµªè€…](https://www.vagrantup.com/) *å’Œ*ä¸€èµ·å¼€å‘ï¼Œå¹¶åœ¨è¿™ä¸¤ä¸ªç¯å¢ƒä¹‹é—´å®ç°å¯¹ç­‰ã€‚

è¿™ç¯‡æ–‡ç« è§£é‡Šäº†ä¸€ä¸ªç¨å¾®ä¸åŒçš„ç”¨ä¾‹:Trellis ç”¨äºå¼€å‘æœåŠ¡å™¨ï¼ŒKinsta ç”¨äºç”Ÿäº§(å’Œ/æˆ–ç™»å°)æœåŠ¡å™¨ã€‚

ä¸ºä»€ä¹ˆè¦åœ¨ Trellis é…ç½®çš„ VPS ä¸Šä½¿ç”¨ Kinstaï¼Ÿå› ä¸ºæœ‰æ—¶å€™ä½ æƒ³ä»˜é’±ç»™åˆ«äºº[æ¥ç®¡ç†æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯è‡ªå·±åš](https://kinsta.com/blog/sysadmin/)(ç‰¹åˆ«æ˜¯å½“ä½ æœ‰å¾ˆå¤šå®¢æˆ·ç«¯çš„æ—¶å€™)ã€‚Kinsta è¿˜ä½¿æ‰©å±•å˜å¾—æ›´å®¹æ˜“ï¼Œè€Œä¸å¿…å¤„ç†å¤šä¸ªæœåŠ¡å™¨ã€è´Ÿè½½å¹³è¡¡å™¨å’Œäº‘ä¸Šä¼ ã€‚

è®¸å¤š WordPress ä¸»æœºå¯¹å¼€å‘è€…ä¸å¤ªå‹å¥½ï¼Œä¸æä¾› SSH è®¿é—®å’Œ Composer æˆ– [WP-CLI](https://kinsta.com/blog/wp-cli/) é›†æˆï¼Œè€Œè¿™äº›æ˜¯ä½¿ç”¨ Trellis å’ŒåŸºå²©çš„è¦æ±‚ã€‚è°¢å¤©è°¢åœ°ï¼Œ **Kinsta åœ¨ä»–ä»¬æ‰€æœ‰çš„æ‰˜ç®¡è®¡åˆ’**ä¸Šæä¾› SSH è®¿é—®ï¼Œä»åˆå­¦è€…åˆ°ä¼ä¸šï¼Œè¿™ä½¿å¾—æ‰€æœ‰è¿™ä¸€åˆ‡æˆä¸ºå¯èƒ½ã€‚ä»–ä»¬è¿˜å¯ä»¥**ä¿®æ”¹æ ¹è·¯å¾„**ä»¥è·å¾—æ­£ç¡®çš„åŠŸèƒ½ã€‚

[Bedrock and Trellis exist to make it easier to develop, maintain, and deploy WordPress sites. ğŸ¤“Click to Tweet](https://twitter.com/intent/tweet?url=https%3A%2F%2Fbit.ly%2F2NRsAD9&via=kinsta&text=Bedrock+and+Trellis+exist+to+make+it+easier+to+develop%2C+maintain%2C+and+deploy+WordPress+sites.+%F0%9F%A4%93&hashtags=webdev%2CWordPress)

## åŸºå²© vs æ™®é€š WordPress

ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆåœ¨ä¼ ç»Ÿçš„ WordPress å®‰è£…ä¸Šä½¿ç”¨åŸºå²©ã€‚åŸå› æ˜¯ï¼ŒåŸºå²©æ˜¯ä¸“ä¸ºç°ä»£ web å¼€å‘äººå‘˜è®¾è®¡çš„**:**

 ***   ç‰¹å®šäºç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œå­˜å‚¨åœ¨å…¬å…± web æ ¹ç›®å½•ä¹‹å¤–
*   åœ¨å•ä¸ª`.env`æ–‡ä»¶ä¸­å°†é…ç½®ä¸ä»£ç åˆ†å¼€çš„ç¯å¢ƒå˜é‡
*   é€šè¿‡é™åˆ¶å¯¹é web æ–‡ä»¶çš„è®¿é—®ä»¥åŠ [bcrypt å“ˆå¸Œå¯†ç ](https://github.com/roots/wp-password-bcrypt)å¢å¼ºå®‰å…¨æ€§
*   åä¸º`app`çš„è‡ªå®šä¹‰ wp å†…å®¹ç›®å½•
*   ç®¡ç† WordPressã€æ’ä»¶ã€ä¸»é¢˜å’Œå…¶ä»– PHP ä¾èµ–é¡¹çš„ç¼–è¾‘å™¨
*   ä¸åŒ…æ‹¬ WordPress æ ¸å¿ƒã€æ’ä»¶å’Œä¸Šä¼ 

[Raspberry Pi](https://www.raspberrypi.org/) ã€ [Snopes](https://www.snopes.com/) ã€ [JetBlue](http://blog.jetblue.com/) ç­‰ç­‰ï¼Œä¿¡ä»»åŸºå²©æ¥é©±åŠ¨ä»–ä»¬çš„ WordPress ç½‘ç«™ã€‚

è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹è¿™ä¸¤ç§æ–‡ä»¶å¤¹ç»“æ„:

![Bedrock vs WordPress](img/683e8839c4e88d5275634ad65eef57d6.png)

Bedrock vs WordPress



åŸºå²©æŠŠ WordPress å®‰è£…åˆ°ä¸€ä¸ªå­ç›®å½•ä¸­åˆ°ä¸‹ä¸€ä¸ªå±‚æ¬¡ã€‚åŸºå²©èƒŒåçš„å¤§éƒ¨åˆ†å“²å­¦å—åˆ°äº†åŒ…æ‹¬ [WordPress ç‰¹å®šç‰ˆæœ¬](https://roots.io/twelve-factor-wordpress/)åœ¨å†…çš„[åäºŒå› ç´ åº”ç”¨](http://12factor.net/)æ–¹æ³•çš„å¯å‘ã€‚

## ä¸º Kinsta é…ç½® Trellis

é¦–å…ˆï¼Œç¡®ä¿æ‚¨çš„å…¬å…± SSH å¯†é’¥è¢«æ·»åŠ åˆ° MyKinsta ä»ªè¡¨æ¿ä¸­ã€‚

Trellis åªéœ€åšä¸€äº›æ›´æ–°å°±å¯ä»¥éƒ¨ç½²åˆ° Kinstaã€‚ç”±äº Kinsta ä» web æœåŠ¡å™¨çš„è§’åº¦æä¾›äº†ä¸€åˆ‡ï¼Œå› æ­¤æä¾›æ‚¨çš„ç™»å°å’Œç”Ÿäº§ç¯å¢ƒå¹¶ä¸é€‚ç”¨ã€‚

one-command éƒ¨ç½²åœ¨ Trellis ä¸­ï¼Œä¸ Kinsta ä¸€èµ·å·¥ä½œï¼Œåªéœ€ç¨åŠ é…ç½®ã€‚ä¸€æ—¦é…ç½®å®Œæˆï¼Œä½ å°±å¯ä»¥é€šè¿‡åœ¨ Trellis ä¸­è¿è¡Œéƒ¨ç½²è¡ŒåŠ¨æ‰‹å†Œæ¥éƒ¨ç½²ä½ çš„ WordPress ç«™ç‚¹:

```
ansible-playbook deploy.yml -e env=staging -e site=example.com --limit=kinsta_staging
```

æ‰“å¼€ä½ çš„ [MyKinsta ä»ªè¡¨æ¿](https://kinsta.com/mykinsta/)ï¼Œå¯¼èˆªåˆ°ä½ ç”¨åŸºå²©å’Œ Trellis è®¾ç½®çš„ WordPress ç«™ç‚¹ï¼Œä»¥åŠä½ çš„[ä»£ç ç¼–è¾‘å™¨](https://kinsta.com/blog/free-html-editor/)ï¼Œæ‰“å¼€ä½ é¡¹ç›®ä¸­çš„`trellis`ç›®å½•ã€‚

é¦–å…ˆç¼–è¾‘`trellis/ansible.cfg`,å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°é¡¶éƒ¨çš„`[defaults]`:

```
forks = 3
host_key_checking = False
```

### åˆ†æ®µé…ç½®

ç¡®ä¿`trellis/group_vars/staging/wordpress_sites.yml`ä¸ºæ‚¨çš„æš‚å­˜ç«™ç‚¹é…ç½®äº†æ­£ç¡®çš„`canonical`:

```
wordpress_sites:
  example.com:
    site_hosts:
      - canonical: staging-example.kinsta.com
```

ç„¶åæ‰“å¼€`trellis/group_vars/staging/main.yml`ï¼Œå°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾:

```
project_root: /www/example_123/public
www_root: /www/example_123/public
web_user: example
web_group: www-data
```

å°†`project_root`å’Œ`www_root`è·¯å¾„æ›¿æ¢ä¸º MyKinsta ä»ªè¡¨æ¿ä¸­ä¸ºæ‚¨çš„ [Kinsta ç™»å°ç¯å¢ƒ](https://kinsta.com/help/staging-environment/)æä¾›çš„æ­£ç¡®è·¯å¾„ã€‚

![Find your public root in MyKinsta.](img/e795d3f2b3f2818f6f73cdd5ab67d465.png)

Find your public root in MyKinsta.



æ¥ä¸‹æ¥ï¼Œé€šè¿‡è¿è¡Œ`ansible-vault edit group_vars/staging/vault.yml`æ‰“å¼€`trellis/group_vars/staging/vault.yml`è¿›è¡Œç¼–è¾‘ã€‚

## æ³¨å†Œè®¢é˜…æ—¶äº‹é€šè®¯



### æƒ³çŸ¥é“æˆ‘ä»¬æ˜¯æ€ä¹ˆè®©æµé‡å¢é•¿è¶…è¿‡ 1000%çš„å—ï¼Ÿ

åŠ å…¥ 20ï¼Œ000 å¤šåè·å¾—æˆ‘ä»¬æ¯å‘¨æ—¶äº‹é€šè®¯å’Œå†…éƒ¨æ¶ˆæ¯çš„äººçš„è¡Œåˆ—å§ï¼

[Subscribe Now](#newsletter)

æˆ‘ä»¬éœ€è¦å°†`db_user`ã€`db_name`å’Œ`db_password`æ·»åŠ åˆ°`env`ä¸­ã€‚æ‚¨å¯ä»¥åœ¨ MyKinsta ä»ªè¡¨æ¿ä¸­æ‚¨ç«™ç‚¹çš„ä¸»ä¿¡æ¯å±å¹•ä¸Šæ‰¾åˆ°è¿™äº›å€¼ã€‚

![SFTP and database credentials in MyKinsta.](img/8a5e3b2a8397051a900fd3463769dc99.png)

SFTP and database credentials in MyKinsta.



```
vault_wordpress_sites:
  example.com:
    env:
      db_user: "example"
      db_name: "example"
      db_password: "xxxxxxxxxxxxxxx"
      # Generate your keys here: https://roots.io/salts.html
      auth_key: ""
      secure_auth_key: ""
      logged_in_key: ""
      nonce_key: ""
      auth_salt: ""
      secure_auth_salt: ""
      logged_in_salt: ""
      nonce_salt: ""
```

æœ€åï¼Œæ‰“å¼€`trellis/hosts/staging`ï¼Œå°†å†…å®¹æ›¿æ¢ä¸º:

```
kinsta_staging ansible_host=104.154.94.123 ansible_ssh_port=12345 ansible_ssh_extra_args='-o StrictHostKeyChecking=no'

[web]
kinsta_staging

[staging]
kinsta_staging
```

ç¡®ä¿ä¸»æœºå’Œ SSH ç«¯å£ä¸ MyKinsta ä»ªè¡¨æ¿ä¸­åˆ—å‡ºçš„ç›¸åŒ¹é…ã€‚

![SFTP host and port details for your staging environment.](img/ebe88c02cbc1c1d42ee61616a8fc6fdc.png)

SFTP host and port details for your staging environment.



### ç”Ÿäº§å‹

ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¯¹ç”Ÿäº§ç¯å¢ƒé‡å¤ä¸Šè¿°ç›¸åŒçš„è¿‡ç¨‹ã€‚ç¡®ä¿åœ¨ MyKinsta ä»ªè¡¨æ¿ä¸­åˆ‡æ¢åˆ°æ‚¨çš„â€œå®æ—¶â€ç¯å¢ƒã€‚

![Switch to your live environment in MyKinsta.](img/ec3d893a3fa035d3435f19912f987144.png)

Switch to your live environment in MyKinsta.



æ‰“å¼€`trellis/group_vars/production/main.yml`å¹¶å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾:

```
project_root: /www/example_123/public
www_root: /www/example_123/public
web_user: example
web_group: www-data
```

ç¡®ä¿å°†`project_root`å’Œ`www_root`è·¯å¾„æ›¿æ¢ä¸º MyKinsta ä»ªè¡¨æ¿ä¸­ä¸ºæ‚¨çš„å®é™…ç¯å¢ƒæä¾›çš„æ­£ç¡®è·¯å¾„ã€‚

æ¥ä¸‹æ¥ï¼Œé€šè¿‡è¿è¡Œ`ansible-vault edit group_vars/production/vault.yml`æ‰“å¼€`trellis/group_vars/production/vault.yml`è¿›è¡Œç¼–è¾‘:

Struggling with downtime and WordPress problems? Kinsta is the hosting solution designed to save you time! [Check out our features](https://kinsta.com/features/)

```
vault_wordpress_sites:
  example.com:
    env:
      db_user: "example"
      db_name: "example"
      db_password: "xxxxxxxxxxxxxxx"
      # Generate your keys here: https://roots.io/salts.html
      auth_key: ""
      secure_auth_key: ""
      logged_in_key: ""
      nonce_key: ""
      auth_salt: ""
      secure_auth_salt: ""
      logged_in_salt: ""
      nonce_salt: ""
```

æœ€åï¼Œæ‰“å¼€`trellis/hosts/production`ï¼Œå°†å†…å®¹æ›¿æ¢ä¸º:

```
kinsta_production ansible_host=104.154.94.123 ansible_ssh_port=12345 ansible_ssh_extra_args='-o StrictHostKeyChecking=no'

[web]
kinsta_production

[production]
kinsta_production
```

### ä¿®æ”¹éƒ¨ç½²ä»»åŠ¡

Trellis éƒ¨ç½²å°è¯•é‡æ–°åŠ è½½`php-fpm`ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä»åœ¨ Kinsta çš„æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å°è¯•ä¸­ç§»é™¤ã€‚æˆ‘ä»¬è¿˜éœ€è¦åœ¨éƒ¨ç½²æ—¶è§¦å‘æ¸…é™¤ [Kinsta çš„ç¼“å­˜](https://kinsta.com/blog/wordpress-cache/)ã€‚

æ‰“å¼€`trellis/roles/deploy/hooks/finalize-after.yml`å¹¶æ»šåŠ¨åˆ°åº•éƒ¨ã€‚åˆ é™¤`Reload php-fpm`çš„æœ€åä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹:

```
- name: Clear Kinsta cache
  uri:
    url: "{{ site_env.wp_home }}/ask-support-rep/"
    method: GET
```

åœ¨**å‘ Kinsta æ”¯æŒä»£è¡¨**è¯¢é—®æ¸…é™¤ç½‘ç«™ç¼“å­˜çš„ URL ä¹‹åï¼Œæ›¿æ¢ä¸Šé¢çš„`ask-support-rep`ã€‚

### å¯é€‰:å®‰è£…ç¼–å†™å™¨ä¾èµ–é¡¹

å¦‚æœä½ çœ‹åˆ°ä¸€ä¸ªå‘Šè¯‰ä½ è¿è¡Œâ€œComposer Installâ€çš„å±å¹•ï¼Œåœ¨ä¸Šé¢çš„â€œClear Kinsta cacheâ€ä»£ç ä¹‹å‰æ·»åŠ ä»¥ä¸‹å†…å®¹:

```
- name: Install Composer dependencies
composer:
command: install
working_dir: >/www/example123/public/final-path
```

`/final-path`å¯èƒ½ä¼šæ ¹æ®æ‚¨çš„åŸºå²©/ç½‘æ ¼è®¾ç½®è€Œæœ‰æ‰€ä¸åŒã€‚

## å‘åŸºå²©æ·»åŠ  kinsta-mu æ’ä»¶

åŸºå²©ç½‘ç«™ä¼šè‡ªåŠ¨å®‰è£…`mu-plugins`ï¼Œä½†æ˜¯ï¼Œä½ éœ€è¦é€šè¿‡å¼•å…¥`kinsta-mu-plugins`åŒ…æ¥å®‰è£… [Kinsta MU æ’ä»¶](https://kinsta.com/help/kinsta-mu-plugin/)ã€‚è¿™ä¸ªæ’ä»¶(å½“ä½ é€šè¿‡ MyKinsta åˆ›å»º WordPress ç«™ç‚¹æ—¶é»˜è®¤å®‰è£…)å¤„ç†è¯¸å¦‚[æ•´é¡µç¼“å­˜](https://kinsta.com/help/full-page-caching/)å’Œ [Kinsta CDN](https://kinsta.com/help/kinsta-cdn/) é›†æˆä¹‹ç±»çš„äº‹æƒ…ã€‚

æ‰“å¼€`site/composer.json`ï¼Œåœ¨`repositories`æ•°ç»„ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹:

```
{
  "type": "package",
  "package": {
    "name": "kinsta/kinsta-mu-plugins",
    "type": "wordpress-muplugin",
    "version": "2.3.3",
    "dist": {
      "url": "https://kinsta.com/kinsta-tools/kinsta-mu-plugins.zip",
      "type": "zip"
    }
  }
}
```

ç„¶åä»æ‚¨çš„åŸºå²©/ç«™ç‚¹ç›®å½•è¿è¡Œä»¥ä¸‹å†…å®¹(æˆ–è€…åœ¨æ‚¨çš„`composer.json`æ–‡ä»¶ä¸­æŒ‡å®š kinsta/kinsta-mu æ’ä»¶ä½œä¸ºè¦æ±‚:

```
composer require kinsta/kinsta-mu-plugins:2.3.3
```

è¦ä¿®å¤ CDN è·¯å¾„å’Œå…±äº«æ’ä»¶èµ„æº URL çš„é—®é¢˜ï¼Œå¯èƒ½éœ€è¦ä»¥ä¸‹å¸¸é‡ã€‚å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°æ‚¨ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ä¸­(åœ¨åŸºå²©ç«™ç‚¹ä¸­ä¸º**åŸºå²©/é…ç½®/åº”ç”¨ç¨‹åº. php** ):

```
/**
 * Kinsta CDN fix for Bedrock
 */
define('KINSTA_CDN_USERDIRS', 'app');

/**
 * Fix Kinsta MU Plugins URL path with Bedrock
 */
$mu_plugins_url = Config::get('WP_CONTENT_URL') . '/mu-plugins';
define('KINSTAMU_CUSTOM_MUPLUGIN_URL', "{$mu_plugins_url}/kinsta-mu-plugins");
```

å¦‚éœ€æ›´å¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬å¦‚ä½•æ›´æ–°æ’ä»¶ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬å…³äº [Kinsta MU æ’ä»¶](https://kinsta.com/help/kinsta-mu-plugin/)çš„æŒ‡å—ã€‚

## åœ¨ Kinsta æ”¯æŒä¸‹çš„æœ€åæ­¥éª¤

æ‚¨éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯é€šçŸ¥ Kinsta å°†æ–‡æ¡£æ ¹è®¾ç½®ä¸ºä»€ä¹ˆã€‚è·³ä¸Š [MyKinsta](https://my.kinsta.com/) ï¼Œè¯·æ±‚æ”¯æŒå›¢é˜Ÿå°†ä½ çš„æ–‡æ¡£æ ¹æ›´æ–°åˆ°`public/current/web`ã€‚

å¦‚æœæ‚¨ä¹‹å‰æ²¡æœ‰è·å¾— clear cache URLï¼Œä¹Ÿè¯·å’¨è¯¢æ‚¨çš„æ”¯æŒä»£è¡¨ï¼Œå¹¶ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ URL æ›´æ–°`trellis/roles/deploy/hooks/finalize-after.yml`,ä»¥ä¾¿åœ¨æˆåŠŸéƒ¨ç½²æ—¶æ¸…é™¤ Kinsta çš„ç¼“å­˜ã€‚

å®Œæˆæ­¤æ›´æ”¹åï¼Œæ‚¨å°†èƒ½å¤Ÿé€šè¿‡ä¸€è¡Œä»£ç åŒæ—¶éƒ¨ç½²åˆ°æ‚¨çš„è¯•è¿è¡Œå’Œç”Ÿäº§ç¯å¢ƒä¸­:

```
# Deploy staging
ansible-playbook deploy.yml -e env=staging -e site=example.com --limit=kinsta_staging

# Deploy production
ansible-playbook deploy.yml -e env=production -e site=example.com --limit=kinsta_production
```

æ›´å¥½çš„æ˜¯â€¦è®¾ç½®ä¸€ä¸ªæŒç»­é›†æˆæœåŠ¡ï¼Œæ¯”å¦‚ CircleCIï¼Œåœ¨æ‚¨æäº¤`staging`æˆ–`master`æ—¶è‡ªåŠ¨ä¸ºæ‚¨è¿è¡Œéƒ¨ç½²ï¼

* * *

è®©ä½ æ‰€æœ‰çš„[åº”ç”¨ç¨‹åº](https://kinsta.com/application-hosting/)ã€[æ•°æ®åº“](https://kinsta.com/database-hosting/)å’Œ [WordPress ç½‘ç«™](https://kinsta.com/wordpress-hosting/)åœ¨çº¿å¹¶åœ¨ä¸€ä¸ªå±‹æªä¸‹ã€‚æˆ‘ä»¬åŠŸèƒ½ä¸°å¯Œçš„é«˜æ€§èƒ½äº‘å¹³å°åŒ…æ‹¬:

*   åœ¨ MyKinsta ä»ªè¡¨ç›˜ä¸­è½»æ¾è®¾ç½®å’Œç®¡ç†
*   24/7 ä¸“å®¶æ”¯æŒ
*   æœ€å¥½çš„è°·æ­Œäº‘å¹³å°ç¡¬ä»¶å’Œç½‘ç»œï¼Œç”± Kubernetes æä¾›æœ€å¤§çš„å¯æ‰©å±•æ€§
*   é¢å‘é€Ÿåº¦å’Œå®‰å…¨æ€§çš„ä¼ä¸šçº§ Cloudflare é›†æˆ
*   å…¨çƒå—ä¼—è¦†ç›–å…¨çƒå¤šè¾¾ 35 ä¸ªæ•°æ®ä¸­å¿ƒå’Œ 275 å¤šä¸ª pop

åœ¨ç¬¬ä¸€ä¸ªæœˆä½¿ç”¨æ‰˜ç®¡çš„[åº”ç”¨ç¨‹åºæˆ–æ‰˜ç®¡](https://kinsta.com/application-hosting/)çš„[æ•°æ®åº“ï¼Œæ‚¨å¯ä»¥äº«å— 20 ç¾å…ƒçš„ä¼˜æƒ ï¼Œäº²è‡ªæµ‹è¯•ä¸€ä¸‹ã€‚æ¢ç´¢æˆ‘ä»¬çš„](https://kinsta.com/database-hosting/)[è®¡åˆ’](https://kinsta.com/plans/)æˆ–[ä¸é”€å”®äººå‘˜äº¤è°ˆ](https://kinsta.com/contact-us/)ä»¥æ‰¾åˆ°æœ€é€‚åˆæ‚¨çš„æ–¹å¼ã€‚**